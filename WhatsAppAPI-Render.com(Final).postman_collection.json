{
  "info": {
    "_postman_id": "bf090252-5933-40f4-ac0f-b16383549fb7",
    "name": "WhatsApp API - Render.com (Final)",
    "description": "Collection completa e atualizada para API WhatsApp no Render.com\n\n## ‚ö†Ô∏è IMPORTANTE - Problema da instance_key\n\nQuando voc√™ cria uma inst√¢ncia SEM passar o par√¢metro `key`, o sistema gera um UUID autom√°tico.\nPor√©m, ap√≥s escanear o QR Code e reconectar, uma NOVA instance_key pode ser gerada.\n\n### Solu√ß√£o:\n**SEMPRE passe o par√¢metro `key` ao criar inst√¢ncia:**\n```\nGET /instance/init?key=minha-instancia&webhook=false\n```\n\nAssim a chave permanece fixa: `minha-instancia`\n\n## üìã Fluxo de uso:\n\n1. **Criar Inst√¢ncia** ‚Üí Passe `key` customizada!\n2. **Ver QR Code** ‚Üí Abra no navegador\n3. **Escanear com WhatsApp** ‚Üí No celular\n4. **Aguardar conex√£o** ‚Üí ~10 segundos\n5. **Listar Inst√¢ncias** ‚Üí Verificar se apareceu\n6. **Enviar Mensagem** ‚Üí Testar!\n\n## üîë Configura√ß√£o:\n\n1. Importe o **Environment** `WhatsApp_API_Environment.postman_environment.json`\n2. Edite as vari√°veis:\n   - `api_token`: Cole o TOKEN do Render\n   - `instance_key`: Nome da sua inst√¢ncia (ex: `meu-whatsapp`)\n   - `phone_number`: N√∫mero com c√≥digo do pa√≠s (ex: `5511999999999@s.whatsapp.net`)\n3. Selecione o environment antes de usar\n\n## üì± Formato de n√∫meros:\n\n- **Contatos:** `C√ìDIGO_PA√çS + DDD + N√öMERO@s.whatsapp.net`\n  - Exemplo: `5511999999999@s.whatsapp.net`\n- **Grupos:** `ID_DO_GRUPO@g.us`\n  - Exemplo: `120363XXXXXXXXXX@g.us`\n\n---\n**Reposit√≥rio:** https://github.com/melquifranco/api-whatsapp-ew",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "151409"
  },
  "item": [
    {
      "name": "Instance",
      "item": [
        {
          "name": "1. Criar Inst√¢ncia (com chave customizada) ‚≠ê",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/instance/init?key={{instance_key}}&webhook=false",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "instance",
                "init"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}",
                  "description": "Chave customizada da inst√¢ncia (OBRIGAT√ìRIO para evitar mudan√ßa de key)"
                },
                {
                  "key": "webhook",
                  "value": "false",
                  "description": "Habilitar webhook"
                }
              ]
            },
            "description": "‚ö†Ô∏è **SEMPRE use este endpoint com par√¢metro `key`!**\n\nCria uma nova inst√¢ncia com chave customizada.\nSem o par√¢metro `key`, um UUID aleat√≥rio √© gerado e pode mudar ap√≥s reconex√£o."
          },
          "response": []
        },
        {
          "name": "2. Criar Inst√¢ncia (chave aleat√≥ria) ‚ö†Ô∏è",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/instance/init?webhook=false",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "instance",
                "init"
              ],
              "query": [
                {
                  "key": "webhook",
                  "value": "false"
                }
              ]
            },
            "description": "‚ö†Ô∏è **N√ÉO RECOMENDADO!**\n\nCria inst√¢ncia com UUID aleat√≥rio.\nA chave pode mudar ap√≥s escanear QR Code.\n\n**Use o endpoint anterior com `key` customizada!**"
          },
          "response": []
        },
        {
          "name": "3. Ver QR Code (p√°gina HTML)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/instance/qr?key={{instance_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "instance",
                "qr"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}"
                }
              ]
            },
            "description": "Abre p√°gina HTML com QR Code.\nAtualiza automaticamente a cada 3 segundos at√© o c√≥digo aparecer.\n\n**Abra no navegador para escanear com WhatsApp!**"
          },
          "response": []
        },
        {
          "name": "4. Obter QR Code Base64",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/instance/qrbase64?key={{instance_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "instance",
                "qrbase64"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}"
                }
              ]
            },
            "description": "Retorna QR Code em Base64.\n√ötil para integra√ß√£o com sistemas."
          },
          "response": []
        },
        {
          "name": "5. Obter Info da Inst√¢ncia",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/instance/info?key={{instance_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "instance",
                "info"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}"
                }
              ]
            },
            "description": "Retorna informa√ß√µes da inst√¢ncia:\n- Status de conex√£o\n- Dados do usu√°rio conectado\n- Webhook configurado"
          },
          "response": []
        },
        {
          "name": "6. Listar Todas as Inst√¢ncias",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/instance/list",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "instance",
                "list"
              ]
            },
            "description": "Lista todas as inst√¢ncias ativas no servidor.\n\n‚ö†Ô∏è **Aten√ß√£o:** Se retornar vazio, pode ser que:\n1. Nenhuma inst√¢ncia foi criada\n2. Servidor reiniciou (inst√¢ncias n√£o persistem)\n3. Inst√¢ncia crashou ao conectar"
          },
          "response": []
        },
        {
          "name": "7. Deletar Inst√¢ncia",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/instance/delete?key={{instance_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "instance",
                "delete"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}"
                }
              ]
            },
            "description": "Deleta completamente a inst√¢ncia:\n- Fecha conex√£o WebSocket\n- Remove arquivos de autentica√ß√£o\n- Limpa do banco de dados\n- Remove do objeto global"
          },
          "response": []
        },
        {
          "name": "8. Logout da Inst√¢ncia",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/instance/logout?key={{instance_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "instance",
                "logout"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}"
                }
              ]
            },
            "description": "Faz logout do WhatsApp.\nO dispositivo ser√° desconectado no celular tamb√©m."
          },
          "response": []
        }
      ],
      "description": "Gerenciamento de inst√¢ncias WhatsApp"
    },
    {
      "name": "Messages",
      "item": [
        {
          "name": "1. Enviar Mensagem de Texto",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"{{phone_number}}\",\n  \"message\": \"Ol√°! Esta √© uma mensagem de teste da API WhatsApp! üöÄ\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/message/text?key={{instance_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "message",
                "text"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}"
                }
              ]
            },
            "description": "Envia mensagem de texto.\n\n**Formato do n√∫mero:**\n`C√ìDIGO_PA√çS + DDD + N√öMERO@s.whatsapp.net`\n\nExemplo: `5511999999999@s.whatsapp.net`"
          },
          "response": []
        },
        {
          "name": "2. Enviar Imagem (via URL)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"{{phone_number}}\",\n  \"message\": \"Confira esta imagem!\",\n  \"url\": \"https://picsum.photos/800/600\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/message/image?key={{instance_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "message",
                "image"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}"
                }
              ]
            },
            "description": "Envia imagem via URL p√∫blica.\n\n**Formatos suportados:** JPG, PNG, GIF\n**URL deve ser acess√≠vel publicamente!**"
          },
          "response": []
        },
        {
          "name": "3. Enviar V√≠deo (via URL)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"{{phone_number}}\",\n  \"message\": \"Veja este v√≠deo!\",\n  \"url\": \"https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/message/video?key={{instance_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "message",
                "video"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}"
                }
              ]
            },
            "description": "Envia v√≠deo via URL p√∫blica.\n\n**Formatos suportados:** MP4, AVI, MKV\n**Tamanho m√°ximo:** ~16MB (limite do WhatsApp)"
          },
          "response": []
        },
        {
          "name": "4. Enviar √Åudio (via URL)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"{{phone_number}}\",\n  \"url\": \"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/message/audio?key={{instance_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "message",
                "audio"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}"
                }
              ]
            },
            "description": "Envia √°udio via URL p√∫blica.\n\n**Formatos suportados:** MP3, OGG, M4A\n**Aparece como √°udio, n√£o como nota de voz**"
          },
          "response": []
        },
        {
          "name": "5. Enviar Documento (via URL)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"{{phone_number}}\",\n  \"message\": \"Segue o documento solicitado\",\n  \"url\": \"https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf\",\n  \"filename\": \"documento.pdf\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/message/document?key={{instance_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "message",
                "document"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}"
                }
              ]
            },
            "description": "Envia documento via URL p√∫blica.\n\n**Formatos suportados:** PDF, DOC, DOCX, XLS, XLSX, TXT, etc.\n**Tamanho m√°ximo:** ~100MB"
          },
          "response": []
        },
        {
          "name": "6. Enviar Localiza√ß√£o",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"{{phone_number}}\",\n  \"latitude\": \"-23.550520\",\n  \"longitude\": \"-46.633308\",\n  \"name\": \"Avenida Paulista\",\n  \"address\": \"Av. Paulista, S√£o Paulo - SP\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/message/location?key={{instance_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "message",
                "location"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}"
                }
              ]
            },
            "description": "Envia localiza√ß√£o geogr√°fica.\n\n**Coordenadas:** Latitude e Longitude\n**Nome e endere√ßo s√£o opcionais**"
          },
          "response": []
        },
        {
          "name": "7. Enviar Contato (vCard)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"{{phone_number}}\",\n  \"vcard\": \"BEGIN:VCARD\\nVERSION:3.0\\nFN:Jo√£o Silva\\nTEL;type=CELL;type=VOICE;waid=5511999999999:+55 11 99999-9999\\nEND:VCARD\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/message/contact?key={{instance_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "message",
                "contact"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}"
                }
              ]
            },
            "description": "Envia contato no formato vCard.\n\n**Formato vCard 3.0**\nIncluir: Nome, telefone, email, etc."
          },
          "response": []
        }
      ],
      "description": "Envio de mensagens e m√≠dias"
    },
    {
      "name": "Groups",
      "item": [
        {
          "name": "1. Criar Grupo",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Meu Grupo de Teste\",\n  \"participants\": [\n    \"5511999999999@s.whatsapp.net\",\n    \"5511888888888@s.whatsapp.net\"\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/group/create?key={{instance_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "group",
                "create"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}"
                }
              ]
            },
            "description": "Cria um novo grupo.\n\n**Participantes:** Array de n√∫meros no formato `N√öMERO@s.whatsapp.net`\n**M√≠nimo:** 1 participante al√©m de voc√™"
          },
          "response": []
        },
        {
          "name": "2. Listar Grupos",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/group/list?key={{instance_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "group",
                "list"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}"
                }
              ]
            },
            "description": "Lista todos os grupos que voc√™ participa.\n\nRetorna: ID, nome, descri√ß√£o, participantes"
          },
          "response": []
        },
        {
          "name": "3. Adicionar Participantes",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"groupId\": \"{{group_id}}\",\n  \"participants\": [\n    \"5511999999999@s.whatsapp.net\"\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/group/add?key={{instance_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "group",
                "add"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}"
                }
              ]
            },
            "description": "Adiciona participantes ao grupo.\n\n**Voc√™ precisa ser admin do grupo!**"
          },
          "response": []
        },
        {
          "name": "4. Remover Participantes",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"groupId\": \"{{group_id}}\",\n  \"participants\": [\n    \"5511999999999@s.whatsapp.net\"\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/group/remove?key={{instance_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "group",
                "remove"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}"
                }
              ]
            },
            "description": "Remove participantes do grupo.\n\n**Voc√™ precisa ser admin do grupo!**"
          },
          "response": []
        },
        {
          "name": "5. Promover a Admin",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"groupId\": \"{{group_id}}\",\n  \"participants\": [\n    \"5511999999999@s.whatsapp.net\"\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/group/promote?key={{instance_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "group",
                "promote"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}"
                }
              ]
            },
            "description": "Promove participantes a administradores.\n\n**Voc√™ precisa ser admin do grupo!**"
          },
          "response": []
        },
        {
          "name": "6. Rebaixar de Admin",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"groupId\": \"{{group_id}}\",\n  \"participants\": [\n    \"5511999999999@s.whatsapp.net\"\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/group/demote?key={{instance_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "group",
                "demote"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}"
                }
              ]
            },
            "description": "Remove privil√©gios de admin.\n\n**Voc√™ precisa ser admin do grupo!**"
          },
          "response": []
        },
        {
          "name": "7. Atualizar Nome do Grupo",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"groupId\": \"{{group_id}}\",\n  \"name\": \"Novo Nome do Grupo\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/group/update?key={{instance_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "group",
                "update"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}"
                }
              ]
            },
            "description": "Atualiza o nome do grupo.\n\n**Voc√™ precisa ser admin do grupo!**"
          },
          "response": []
        },
        {
          "name": "8. Sair do Grupo",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"groupId\": \"{{group_id}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/group/leave?key={{instance_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "group",
                "leave"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}"
                }
              ]
            },
            "description": "Sai do grupo.\n\n**A√ß√£o irrevers√≠vel!** Voc√™ precisar√° ser adicionado novamente."
          },
          "response": []
        }
      ],
      "description": "Gerenciamento de grupos"
    },
    {
      "name": "Misc",
      "item": [
        {
          "name": "1. Verificar se N√∫mero Existe",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/misc/onwhatsapp?key={{instance_key}}&phone=5511999999999",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "misc",
                "onwhatsapp"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}"
                },
                {
                  "key": "phone",
                  "value": "5511999999999",
                  "description": "N√∫mero SEM @s.whatsapp.net"
                }
              ]
            },
            "description": "Verifica se um n√∫mero est√° registrado no WhatsApp.\n\n**Formato:** Apenas n√∫meros, sem @s.whatsapp.net\nExemplo: `5511999999999`"
          },
          "response": []
        },
        {
          "name": "2. Obter Foto de Perfil",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/misc/profilepic?key={{instance_key}}&id={{phone_number}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "misc",
                "profilepic"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}"
                },
                {
                  "key": "id",
                  "value": "{{phone_number}}",
                  "description": "N√∫mero COM @s.whatsapp.net"
                }
              ]
            },
            "description": "Obt√©m URL da foto de perfil.\n\n**Formato:** `N√öMERO@s.whatsapp.net`\n**Retorna:** URL da imagem em alta resolu√ß√£o"
          },
          "response": []
        },
        {
          "name": "3. Obter Status/Bio",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/misc/status?key={{instance_key}}&id={{phone_number}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "misc",
                "status"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}"
                },
                {
                  "key": "id",
                  "value": "{{phone_number}}"
                }
              ]
            },
            "description": "Obt√©m o status/bio do contato.\n\n**Formato:** `N√öMERO@s.whatsapp.net`\n**Retorna:** Texto do status"
          },
          "response": []
        },
        {
          "name": "4. Marcar como Lida",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"{{phone_number}}\",\n  \"messageId\": \"MESSAGE_ID_AQUI\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/message/read?key={{instance_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "message",
                "read"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}"
                }
              ]
            },
            "description": "Marca mensagem como lida (‚úì‚úì azul).\n\n**messageId:** ID da mensagem recebida"
          },
          "response": []
        }
      ],
      "description": "Funcionalidades diversas"
    },
    {
      "name": "Data",
      "item": [
        {
          "name": "Status",
          "request": {
            "method": "GET",
            "header": []
          },
          "response": []
        },
        {
          "name": "Init",
          "request": {
            "method": "GET",
            "header": []
          },
          "response": []
        },
        {
          "name": "New Request",
          "request": {
            "method": "GET",
            "header": []
          },
          "response": []
        }
      ]
    },
    {
      "name": "Webhook",
      "item": [
        {
          "name": "1. Configurar Webhook",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"webhook_url\": \"https://webhook.site/sua-url-aqui\",\n  \"enabled\": true,\n  \"events\": {\n    \"messages_upsert\": true,\n    \"messages_update\": true,\n    \"messages_delete\": true,\n    \"message_reaction\": true,\n    \"connection_update\": true\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/webhook/set?key={{instance_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "webhook",
                "set"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}",
                  "description": "Chave da inst√¢ncia"
                }
              ]
            },
            "description": "Configura webhook para receber eventos do WhatsApp.\n\n**Par√¢metros:**\n- `webhook_url`: URL p√∫blica que receber√° os eventos (obrigat√≥rio)\n- `enabled`: Ativar/desativar webhook (padr√£o: true)\n- `events`: Eventos a serem enviados (opcional)\n\n**Eventos dispon√≠veis:**\n- `messages_upsert`: Nova mensagem recebida ‚≠ê\n- `messages_update`: Mensagem atualizada\n- `messages_delete`: Mensagem deletada\n- `message_reaction`: Rea√ß√£o a mensagem\n- `connection_update`: Status de conex√£o\n- E mais 9 eventos configur√°veis!\n\n**Teste r√°pido:**\n1. Acesse https://webhook.site\n2. Copie a URL √∫nica gerada\n3. Configure aqui\n4. Envie mensagem para o WhatsApp\n5. Veja chegando em tempo real!"
          },
          "response": []
        },
        {
          "name": "2. Obter Configura√ß√£o do Webhook",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/webhook/get?key={{instance_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "webhook",
                "get"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}",
                  "description": "Chave da inst√¢ncia"
                }
              ]
            },
            "description": "Obt√©m a configura√ß√£o atual do webhook.\n\n**Retorna:**\n- URL configurada\n- Status (enabled/disabled)\n- Eventos habilitados\n- Estat√≠sticas b√°sicas:\n  - Total de mensagens enviadas\n  - Total de falhas\n  - √öltimo sucesso\n  - √öltimo erro\n- Datas de cria√ß√£o e atualiza√ß√£o"
          },
          "response": []
        },
        {
          "name": "3. Testar Webhook",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/webhook/test?key={{instance_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "webhook",
                "test"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}",
                  "description": "Chave da inst√¢ncia"
                }
              ]
            },
            "description": "Envia uma mensagem de teste para o webhook.\n\n**√ötil para:**\n- Verificar se a URL est√° acess√≠vel\n- Testar se o endpoint est√° respondendo\n- Validar formato dos dados recebidos\n\n**Payload de teste:**\n```json\n{\n  \"instance_key\": \"sua-instancia\",\n  \"event\": \"test\",\n  \"data\": {\n    \"test\": true,\n    \"message\": \"This is a test webhook from WhatsApp API\",\n    \"timestamp\": 1768868327077\n  },\n  \"timestamp\": 1768868327077\n}\n```\n\n**Resposta esperada do webhook:** HTTP 200 OK"
          },
          "response": []
        },
        {
          "name": "4. Estat√≠sticas do Webhook ‚≠ê NOVO",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/webhook/stats?key={{instance_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "webhook",
                "stats"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}",
                  "description": "Chave da inst√¢ncia"
                }
              ]
            },
            "description": "‚≠ê **NOVO ENDPOINT**\n\nObt√©m estat√≠sticas detalhadas do webhook.\n\n**Retorna:**\n- `instance_key`: Chave da inst√¢ncia\n- `enabled`: Status (ativo/inativo)\n- `total_sent`: Total de webhooks enviados com sucesso\n- `total_failed`: Total de falhas\n- `success_rate`: Taxa de sucesso (%) calculada automaticamente\n- `last_success_at`: Data/hora do √∫ltimo envio bem-sucedido\n- `last_failure_at`: Data/hora da √∫ltima falha\n- `last_error`: Mensagem do √∫ltimo erro\n- `created_at`: Data de cria√ß√£o\n- `updated_at`: √öltima atualiza√ß√£o"
          },
          "response": []
        },
        {
          "name": "5. Listar Todos os Webhooks ‚≠ê NOVO",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/webhook/list",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "webhook",
                "list"
              ]
            },
            "description": "‚≠ê **NOVO ENDPOINT**\n\nLista todos os webhooks configurados no sistema.\n\n**N√£o requer par√¢metro `key`** - retorna TODOS os webhooks.\n\n**√ötil para:**\n- Monitorar todas as inst√¢ncias\n- Verificar quais webhooks est√£o ativos\n- Identificar problemas em massa\n- Dashboard de administra√ß√£o"
          },
          "response": []
        },
        {
          "name": "6. Remover Webhook",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/webhook/remove?key={{instance_key}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "webhook",
                "remove"
              ],
              "query": [
                {
                  "key": "key",
                  "value": "{{instance_key}}",
                  "description": "Chave da inst√¢ncia"
                }
              ]
            },
            "description": "Remove completamente a configura√ß√£o do webhook.\n\n**A√ß√£o:**\n- Deleta o webhook do MongoDB\n- Para de enviar eventos\n- Remove todas as estat√≠sticas\n\n**‚ö†Ô∏è Aten√ß√£o:**\n- A√ß√£o irrevers√≠vel!\n- Estat√≠sticas ser√£o perdidas\n- Para pausar temporariamente, use `enabled: false` no endpoint de configura√ß√£o"
          },
          "response": []
        }
      ],
      "description": "Gerenciamento de webhooks para receber eventos do WhatsApp\n\n## üéØ Fluxo de uso:\n\n1. **Configurar Webhook** ‚Üí POST /webhook/set\n2. **Testar** ‚Üí GET /webhook/test\n3. **Monitorar** ‚Üí GET /webhook/stats\n4. **Listar todos** ‚Üí GET /webhook/list\n5. **Obter config** ‚Üí GET /webhook/get\n6. **Remover** ‚Üí DELETE /webhook/remove\n\n## üì° Eventos Dispon√≠veis:\n\n- `messages_upsert` - Nova mensagem ‚≠ê\n- `messages_update` - Mensagem atualizada\n- `messages_delete` - Mensagem deletada\n- `message_reaction` - Rea√ß√£o a mensagem\n- `connection_update` - Status de conex√£o\n- E mais 9 eventos configur√°veis!\n\n## üöÄ Teste R√°pido:\n\n1. Acesse https://webhook.site\n2. Copie a URL √∫nica\n3. Configure com POST /webhook/set\n4. Teste com GET /webhook/test\n5. Envie mensagem real\n6. Veja chegando em tempo real!\n\n## üíæ Armazenamento:\n\nWebhooks s√£o salvos no MongoDB e **persistem entre rein√≠cios** do servidor."
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{api_token}}",
        "type": "string"
      }
    ]
  }
}